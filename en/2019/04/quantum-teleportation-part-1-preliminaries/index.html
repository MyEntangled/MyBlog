<!DOCTYPE html>
<html lang="en-us" />
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


    <title>Quantum Teleportation (Part 1): Preliminaries &middot; My Entangled: Blogging on Quantum Information, Quantum Algorithms and Quantum Computing</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://myentangled.com/favicon.ico" />
    <link rel="canonical" href="https://myentangled.com/en/2019/04/quantum-teleportation-part-1-preliminaries/" />

     <meta name="description" content="Here we start exploring a core of Quantum Computing: Quantum Algorithms. Before we dive into the dark and deep pool of such algorithms, it&amp;rsquo;s helpful to ge" /> 

     
    
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image" content="https://myentangled.com/uploads/Teleportation/fig1.jpg"/>
    
 
    <meta name="twitter:title" content="Quantum Teleportation (Part 1): Preliminaries"/>
    <meta name="twitter:description" content="Here we start exploring a core of Quantum Computing: Quantum Algorithms. Before we dive into the dark and deep pool of such algorithms, it&amp;rsquo;s helpful to ge"/>
    <meta name="twitter:url" content="https://myentangled.com/en/2019/04/quantum-teleportation-part-1-preliminaries/" />
    <meta name="twitter:site" content="@"/>

    <meta property="og:site_name" content="My Entangled: Blogging on Quantum Information, Quantum Algorithms and Quantum Computing" />
    <meta property="og:title" content="Quantum Teleportation (Part 1): Preliminaries &middot; " />
    <meta property="og:url" content="https://myentangled.com/en/2019/04/quantum-teleportation-part-1-preliminaries/" />
    <meta property="article:publisher" content="https://www.facebook.com/duong.dinh.trong99" />

    <meta property="og:type" content="article" />
    <meta property="og:description" content="Here we start exploring a core of Quantum Computing: Quantum Algorithms. Before we dive into the dark and deep pool of such algorithms, it&amp;rsquo;s helpful to ge" />

    <meta property="article:published_time" content="2019-04-26T15:26:46&#43;07:00" />
    <meta property="article:tag" content="Teleportation" />

    <meta property="og:image" content="https://myentangled.com/uploads/Teleportation/fig1.jpg"/>


    <meta name="generator" content="Hugo 0.54.0" />

    <!-- Stylesheets -->
    <link rel="stylesheet" type="text/css" href="https://myentangled.com/built/screen.css" /> 
    <link rel="stylesheet" type="text/css" href="https://myentangled.com/css/casper-two.css" /> 
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" />
    

     

    
    <script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
  });
  MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });

  MathJax.Hub.Config({
  
  TeX: { equationNumbers: { autoNumber: "AMS" } }
  });
</script> 
    


    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR|Roboto" rel="stylesheet" type='text/css'>

    <style>
    p{
    font-family: 'Arial', sans-serif;
    }
    body {
    }
    code {}
    }
    </style>

</head>


<body class="post-template">
  <div class="site-wrapper"> 

<header class="site-header outer">
  <div class="inner">
    <nav class="site-nav">
      <div class="site-nav-left">

        <ul class="nav" role="menu">
        
        
        
            <li class="" role="menuitem">
              <a href="/en/">Home</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/en/categories/quantum-information">Quantum Information</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/en/categories/quantum-algorithms/">Quantum Algorithms</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/en/tags/project/">Projects</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/en/2019/04/who-am-i-and-what-the-fish-is-this-blog/">About me</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/en/categories/stories/">Stories</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/en/2019/05/study-resources/">Resources</a>
            </li>
        
            <li class="" role="menuitem">
              <a href="/vn/">Tiếng Việt</a>
            </li>
        
      </ul></div>

      <div class="site-nav-right">
        <div class="social-links">
                    <a class="social-link social-link-fb" href="https://www.facebook.com/duong.dinh.trong99" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg></a>

                    

                    <a class="social-link" href="https://github.com/myentangled" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>

                    

                    
        </div>  
            
      </div>

    </nav>  

  </div>
</header>

<main id="site-main" class="site-main outer" role="main">
  <div class="inner">
    
      <article class="post-full post"> 
    <header class="post-full-header">
        <section class="post-full-meta">
            <time class="post-full-meta-date" datetime="2019-04-26">26 April 2019</time>
                <span class="date-divider">/</span> <a href="/en/tags/teleportation/">#Teleportation</a>&nbsp;
        </section>
        <h1 class="post-full-title">Quantum Teleportation (Part 1): Preliminaries</h1>
    </header>
    
    <figure class="post-full-image" style="background-image: url(https://myentangled.com/uploads/Teleportation/fig1.jpg)">
    </figure>

    <section class="post-full-content">
        <div class="kg-card-markdown">
        

<blockquote>
<p>Here we start exploring a core of Quantum Computing: Quantum Algorithms. Before we dive into the dark and deep pool of such algorithms, it&rsquo;s helpful to get familiar with a fundamental constraint to Quantum Computing. In contrast, I&rsquo;ll also introduce you how powerful qubits get in solving problems through a basic protocol: Quantum Teleportation, the &ldquo;Hello, world!&rdquo; of Quantum Programming.</p>
</blockquote>

<h4 id="no-cloning-theorem">No-cloning theorem</h4>

<p>In terms of computer architechture, it&rsquo;s convenient to copy the state of a bit in order to create a new qubit exactly the same. The protocol that seems really simple in the classical scenario is nonetheless proven impossible to perform quantumly. You should understand that while measuring a bit is extremely easy, just $0$ or $1$ with nearly perfect certainty, that process is difficult as mentioned in my previous posts. You can still measure a qubit, but what you really get is just no more than probabilities. They are not even coefficients, what are essential to fully illustrate a qubit state, and just obtained in a statistical manner rather than deterministically. For those reasons, one will never get suffcient information to recreate another version from an arbitrary qubit in general.</p>

<p>You may think that although we cannot recreate the qubit by knowing all of its amplitudes, we can copy its state to another without knowing the state. Unfortunatly, the cloning procedure is also unaccomplishable with the disproof as follows.</p>

<p>Let&rsquo;s formalize the problem. Trong was given a qubit that can be in any state $|\psi\rangle$, and he want to duplicate his qubit&rsquo;s state through a transformation that acts on his qubit and the second qubit initialized in $|0\rangle$. The whole process is displayed in the figure below.</p>

<p><img src="/uploads/Teleportation/circuit_1.png" alt="Example image" /></p>

<p>We want a unitary transformation $U$ as a map that $U|\psi\rangle |0\rangle = |\psi\rangle |\psi\rangle$:
$$(\alpha|0\rangle + \beta|1\rangle) \otimes |0\rangle \overset{U}{\rightarrow} (\alpha|0\rangle + \beta|1\rangle)(\alpha|0\rangle + \beta|1\rangle) \quad \forall \alpha, \beta\in \mathbb{C}$$
Second qubit replicating the first qubit means $|00\rangle \overset{U}{\rightarrow} |00\rangle$ and $|10\rangle \overset{U}{\rightarrow} |11\rangle$, which leads to the transformation of the LHS
$$\begin{matrix} \alpha|00\rangle + \beta|10\rangle &amp; \overset{U}{\rightarrow} &amp; \alpha \cdot U|00\rangle + \beta \cdot U|11\rangle \\ &amp; = &amp; \alpha |00\rangle + \beta |11\rangle  \end{matrix}$$
On the other hand, the expanded RHS is
$$(\alpha|0\rangle + \beta|1\rangle)(\alpha|0\rangle + \beta|1\rangle) = \alpha^2 |00\rangle + \alpha\beta |01\rangle + \alpha\beta |10\rangle + \beta^2 |11\rangle$$
So we have a contradiction as $$\alpha |00\rangle + \beta |11\rangle = \alpha^2 |00\rangle + \alpha\beta |01\rangle + \alpha\beta |10\rangle + \beta^2 |11\rangle$$ only when $\alpha = 1$ or $\beta = 1$.</p>

<p>As you can see, it&rsquo;s impossible to clone a qubit state unless the qubit is in the classical state $0$ and $1$. The no-cloning theorem introduces a fundamental barrier to the field as there isn&rsquo;t a universal machine that handles the cloning problem. Imagining that you are free to clone an arbitrary qubit with no idea about its state, i.e. there exists a cloning unitary, you could overcome the post-measurement collapse of a qubit by performing as many experiments as you desire on the clones to figure out the true state of that qubit.</p>

<h4 id="bell-state-circuit">Bell State Circuit</h4>

<p>We have already learned about Bell states through one of my posts on quantum entanglement. There are four Bell states totally, $|\Psi^+\rangle$, $|\Psi^-\rangle$, $|\Phi^+\rangle$, $|\Phi^-\rangle$. The Bell states are essential in several algorithms, one of which is teleportation. So, learning how to construct a Bell state is a necessity before we proceed towards the protocol.</p>

<p><img src="/uploads/Teleportation/circuit_2.png" alt="Example image" /></p>

<p>Let&rsquo;s get familiar with drawings in quantum circuits. An operator (usually called &lsquo;gate&rsquo; in circuits) is a square that contains a letter standing for the meaning of the gate. Controlled-NOT (CNOT) gate includes a large black dot connected with $\otimes$. The black dot holds for the <em>control qubit</em>, and the $\oplus$ (addition in 2-modulus) is the operator that will act on the <em>target qubit</em> if the control qubit is $|1\rangle$. Following the circuit in the figure, we will be able to create the Bell state $\displaystyle{|\Phi^+\rangle = \frac{1}{\sqrt{2}} |00\rangle + \frac{1}{\sqrt{2}} |11\rangle}$.</p>

<p>First, we have two qubits both initialized in a basis state. $$|\psi\rangle = |00\rangle$$
Followed from the Hadamard gate acting on the first qubit, the composite state transforms into
$$\begin{matrix} |\psi\rangle &amp;\leftarrow&amp; \displaystyle{\left(\frac{1}{\sqrt{2}} |0\rangle + \frac{1}{\sqrt{2}} |1\rangle\right) \otimes |0\rangle} \\
&amp;=&amp; \displaystyle{\frac{1}{\sqrt{2}} |00\rangle + \frac{1}{\sqrt{2}} |10\rangle} \end{matrix}$$
The CNOT gate adjusts components of the composite state $|\psi_1\rangle$ where the first qubit state is $|1\rangle$ and keeps the others the same. The performed transformation on the second qubit is a NOT gate (or $X$ gate), which is arithmatically the same as an addition module $2$.
$$|\psi\rangle \leftarrow \frac{1}{\sqrt{2}} |00\rangle + \frac{1}{\sqrt{2}} |11\rangle$$
That final state is a Bell state that shows some characteristics helpful in teleportation and other algorithms in general. You should explore by yourself what the eventual results would be if we change the initialized states to $|01\rangle$, $|10\rangle$ and $|11\rangle$ respectively.</p>
    
        </div>
    </section>

    <footer class="post-full-footer">
      <section class="author-card">
        <img class="author-profile-image" src="https://myentangled.com/uploads/profile.jpg" alt="Author" />
        <section class="author-card-content">
            <h4 class="author-card-name"><a href="/en/">Entangled Cat</a></h4>
                <p>I work hard so that my cats can live a better live</p>
        </section>
      </section>
    </footer>
</article>
    
    
    

  </div>
</main>


<aside class="read-next outer">
  <div class="inner">
    <div class="read-next-feed">      
      
<article class="read-next-card" 
            style="background-image: url(https://myentangled.com/uploads/cover%20blog.png);" >
    <header class="read-next-card-header">
        <small class="read-next-card-header-sitetitle">&mdash;  &mdash;</small>
        
        <h3 class="read-next-card-header-title"><a href="/en/tags/teleportation/">#Teleportation</a></h3>
    </header>
    <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
    </div>

    <div class="read-next-card-content">
      
        <ul>
          <li><a href="https://myentangled.com/en/2019/05/bernstein-vazirani-algorithm-part-1-a-derivation-of-the-deutsch-jozsa-algorithm/">Bernstein-Vazirani algorithm (Part 1): A derivation of the Deutsch-Jozsa algorithm</a></li>            
        
          <li><a href="https://myentangled.com/en/2019/08/randomized-benchmarking-part-2-protocols-for-standard-and-interleaved-versions.-experiments-with-a-realistic-quantum-device./">Randomized Benchmarking (Part 2): Protocols for standard and interleaved versions. Experiments with a realistic quantum device.</a></li>            
        
          <li><a href="https://myentangled.com/en/2019/05/tuy%E1%BB%83n-sinh-pima-2019-the-mathematics-of-deep-learning/">[TUYỂN SINH] PiMA 2019 - The Mathematics of Deep Learning</a></li>            
        
          <li><a href="https://myentangled.com/en/2019/07/error-rate-vs-fidelity-part-1-unveil-the-mathematics-behind-quantum-error-rate/">Error rate vs Fidelity (Part 1): Unveil the mathematics behind quantum error rate</a></li>            
        </ul>
    </div>
    <footer class="read-next-card-footer">
      
        <a href="/en/tags/teleportation/">See all related posts →</a>
    </footer>
</article>


      
      <article class="post-card post"> 
    
    <a class="post-card-image-link" href="https://myentangled.com/en/2019/04/quantum-teleportation-part-3-implementation/">
      <div class="post-card-image" style="background-image: url(https://myentangled.com/uploads/Teleportation/fig1.jpg)"></div>
    </a>
    

    <div class="post-card-content">
      <a class="post-card-content-link" href="https://myentangled.com/en/2019/04/quantum-teleportation-part-3-implementation/">
          <header class="post-card-header">
              <span class="post-card-tags">
              #project 
              #Teleportation  </span>
              
              <h2 class="post-card-title">Quantum Teleportation (Part 3): Implementation</h2>
          </header>
          <section class="post-card-excerpt">
              
                <p>Let&rsquo;s implement and verify the teleporation protocol following the procedure we discussed throughout previous parts.
First we need to create an arbitrary quantum state. Trong has been curious about the combined effect of rotation gates about the x, y, and z axes. So, he decides to apply three distinct rotation gates, each as a rotation of 60 degrees around one coordinate axis acting on a qubit currently in the Hadamard state $|-\rangle$. ...  </p>
              
          </section>
      </a>

      <footer class="post-card-meta">
          <img class="author-profile-image" src="https://myentangled.com/uploads/profile.jpg" alt="Author" />
          <span class="post-card-author"><a href="/">Entangled Cat</a></span>
      </footer>
    </div>
</article>
      
      
      <article class="post-card post"> 
    
    <a class="post-card-image-link" href="https://myentangled.com/en/2019/04/a-formal-approach-to-observables-and-measurements/">
      <div class="post-card-image" style="background-image: url(https://myentangled.com/uploads/Quantum%20Measurement/cover.jpg)"></div>
    </a>
    

    <div class="post-card-content">
      <a class="post-card-content-link" href="https://myentangled.com/en/2019/04/a-formal-approach-to-observables-and-measurements/">
          <header class="post-card-header">
              <span class="post-card-tags">
              #Quantum Mechanics  </span>
              
              <h2 class="post-card-title">A formal approach to Observables and Measurements</h2>
          </header>
          <section class="post-card-excerpt">
              
                <p>Throughout previous posts, I&rsquo;ve delivered a way to understand what is a quantum measurement. That way of understanding is simple and may suit our normal intuition, but measurement is a non-trivial physical process and somewhat counter-intuitive for several reasons.
First, a measurement in general results in probabilistic outcomes. No matter how careful you prepare for the measurement procedure, it is inherent that possible outcomes of a measure is distributed according to a certain probability distribution determined by the state space of your quantum system. ...  </p>
              
          </section>
      </a>

      <footer class="post-card-meta">
          <img class="author-profile-image" src="https://myentangled.com/uploads/profile.jpg" alt="Author" />
          <span class="post-card-author"><a href="/">Entangled Cat</a></span>
      </footer>
    </div>
</article>
      
    </div>
  </div>
</aside>

<div class="floating-header">
  <div class="floating-header-logo">
    <a href="https://myentangled.com/">
      
      <span>My Entangled: Blogging on Quantum Information, Quantum Algorithms and Quantum Computing</span>
    </a>
  </div>
  <span class="floating-header-divider">&mdash;</span>
  <div class="floating-header-title">Quantum Teleportation (Part 1): Preliminaries</div>
  <div class="floating-header-share">
    <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
     <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/></svg>
    </div>
    
    <a class="floating-header-share-tw" href="https://twitter.com/share?text=Quantum%20Teleportation%20%28Part%201%29%3a%20Preliminaries&amp;url=https%3a%2f%2fmyentangled.com%2fen%2f2019%2f04%2fquantum-teleportation-part-1-preliminaries%2f"
          onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
      </a>
      <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fmyentangled.com%2fen%2f2019%2f04%2fquantum-teleportation-part-1-preliminaries%2f"
          onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
      </a>
  </div>

  <progress class="progress" value="0">
    <div class="progress-container">
      <span class="progress-bar"></span>
    </div>
  </progress>
</div>



<footer class="site-footer outer">
  <div class="site-footer-content inner">
    <section class="copyright" style="line-height: 1.3em;">
      <a href="/"></a>  <br>
      
    </section>
    <nav class="site-footer-nav">
        <a href="/">Latest Posts</a>
        <a href="https://www.facebook.com/duong.dinh.trong99" target="_blank" rel="noopener">Facebook</a>
        
        <a href="https://github.com/myentangled" target="_blank" rel="noopener">Github</a>
        
        
    </nav>  
  </div>

</footer>

</div>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script type="text/javascript" src="//code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="https://myentangled.com/js/jquery.fitvids.js"></script>

<script>hljs.initHighlightingOnLoad();</script>


  <!-- Google Analytics -->
  <script>
    var _gaq=[['_setAccount','UA-140823575-1'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>


    <script>





$(document).ready(function () {
    
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>
</body></html>
